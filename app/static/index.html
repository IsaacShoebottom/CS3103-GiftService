<!DOCTYPE html>

<head>
  <title>Welcome to Presents R Us</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@3.4.21/dist/vue.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.8/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script type="module" src="/static/index.js"></script>
</head>
<html data-bs-theme="dark">

<body>
  <div class="container-xxl" id="app">
    <div class="navbar">
      <!-- Horrible abuse of navbar-nav. Should make profile and browse collapseable but thats more work -->
      <div class="navbar-nav">
        <a class="navbar-brand" href="#">Presents R Us</a>
      </div>
      <div class="navbar-nav">
        <a class="nav-link" href="#" :class="{ active: view === views.profile}" @click="viewProfile()">Profile</a>
      </div>
      <div>
        <a class="nav-link" href="#" :class="{ active: view === views.browse}" @click="viewBrowse()">Browse</a>
      </div>
      <div class="navbar-nav">
        <button v-if="userData.loggedIn" class="nav-item btn btn-primary" @click="logout()">Logout</button>
      </div>
    </div>
    <div v-if="!userData.loggedIn" class="input-group mb-3">
      <input class="form-control" placeholder="Username" type="text" v-model="userData.username">
      <input class="form-control" placeholder="Password" type="password" v-model="userData.password">
      <button class="btn btn-primary" @click="login()">Login</button>
    </div>

    <div v-if="view === views.browse" class="input-group">
      <input class="form-control" placeholder="Search" type="text" v-model="term">
      <button class="btn btn-primary" @click="search(term)">Search</button>
    </div>
    <div v-if="view === views.profile" class="input-group">
      <input class="form-control" placeholder="Name" type="text" v-model="addData.name">
      <input class="form-control" placeholder="Link" type="text" v-model="addData.link">
      <button class="btn btn-primary" @click="add()">Add</button>
    </div>
    <div>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th class="w-100">Name</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tr v-for="(present, index) in presents">
          <td>{{ index+1 }}</td>
          <td class="w-100"><a :href="present.link">{{ present.title }}</a></td>
          <td><button class="btn btn-primary" @click="editModal(present.presentId, index)">Edit</button></td>
          <td><button class="btn btn-primary" @click="remove(present.presentId)">Delete</button></td>
        </tr>
      </table>
    </div>
    <div class="input-group" v-if="editData.mode">
      <input class="form-control" type="text" placeholder="Name" v-model="editData.name">
      <input class="form-control" type="text" placeholder="Link" v-model="editData.link">
      <button class="btn btn-primary" @click="edit()">Update</button>
    </div>
  </div>
</body>

</html>